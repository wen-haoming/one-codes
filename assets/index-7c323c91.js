import{j as e,F as v,a as i,D as $,p as F,b as j,c as W,r as q,R as D,d as p,u as f,e as _,f as H,P as J,l as K,C as Q,B as x,g as V,h as k,I as O,T as C,i as G,k as U,S as Z,m as X,n as Y,o as w,q as ee,s as te,N as le,z as oe,t as re,v as ne,w as I,M as A,x as ae,y as se,A as ie,E as ce,G as de,H as pe,J as me,K as ue,L as fe,Q as he}from"./vendor-de0b9785.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();const ye=()=>e(v,{children:i("div",{className:"h-10 flex items-center px-4 justify-between border-b-1	 border-brand-grey",children:[i("span",{className:"flex text-sm text-brand-primary font-semibold ",children:[i("svg",{width:"20",height:"20",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{d:"M31 4H16L10 27H18L14 44L40 16H28L31 4Z",fill:"#2F88FF",stroke:"#2558fb",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"miter"}),e("path",{d:"M21 11L19 19",stroke:"#2558fb",strokeWidth:"4",strokeLinecap:"round"})]}),"One-codes"]}),i("div",{className:"flex items-center",children:[i("div",{className:"btn m-r1",onClick:()=>{},children:[e($,{className:"m-r-1"}),"出码"]}),e("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/wen-haoming/antd-one-editor",className:"i-mdi-github text-black text-size-2xl cursor-pointer hover:text-brand-primary"})]})]})}),b=F({panelMode:"edit"}),g=F([]),d=F({}),T=F({install:[]}),be=(o,l)=>{const s=({idSchema:n})=>n.map(t=>{const r=l[t.id].component,a=l[t.id].props;return t.slot?p.createElement(r,{...a,key:t.id},s({idSchema:t.slot})):p.createElement(r,{...a,key:t.id})});return q(e(D.Fragment,{children:s({idSchema:o})},""),{filterProps:["key"],displayName(n){var t;return((t=l[String(n.key).replace(/[^\w]|$/g,"")])==null?void 0:t.componentName)||""}})},xe=(o,l)=>{const n=`

  function Page (){

    return ${be(o,l)}
  }

  export default Page
  `;return j.format(n,{parser:"babel",plugins:[W]})},ge=()=>{const o=f(g),l=f(d);return e(_,{theme:"dark",readOnly:!0,height:"100%",value:xe(o,l)||"",className:"h-100%",extensions:[H({jsx:!0,typescript:!0})]})},Se=()=>Math.floor(Math.random()*1e5).toString(16),L=o=>{const{slotId:l}=o,[s,n]=p.useState(!1);return e(J,{overlayClassName:"p-0",style:{padding:0},overlayInnerStyle:{padding:0,borderRadius:8},overlayStyle:{padding:0},showArrow:!1,arrowPointAtCenter:!0,placement:"bottomLeft",trigger:["click","hover"],open:s,onOpenChange:n,content:e("div",{className:"w-350px min-h-200px z-9999999999999",children:T.install.map((t,r)=>i("div",{children:[e("p",{className:"m-0 text-gray text-1",children:t.typeName}),e("div",{className:"flex flex-row flex-wrap",children:t.children.map((a,m)=>i("div",{className:"widgetBtn flex-1 text-2 flex items-center",onClick:()=>{const y=Se();let h="";if(l){const u=K(g,d[l].path);u&&(u.slot?u.slot.push({id:y}):u.slot=[{id:y}]),d[l].path?(h=`${d[l].path}.slot[${u.slot.length-1}]`,console.log(JSON.stringify(g),h)):h=`[${u.slot.length-1}]`}else g.push({id:y}),h=`[${g.length-1}]`;d[y]={props:a.defaultProps||null,component:a.component,componentName:a.componentName,configProps:a.configProps,path:h},n(!1)},children:[e(Q,{style:{color:"#2558fb"},className:"m-r-3 text-4"}),a.title||a.componentName]},`${r}-${m}-${a.title||a.component.name}`))})]},r))}),children:e(x,{className:"bg-brand-primary  text-white	text-10px cursor-pointer p-8px",type:"primary",icon:e(V,{style:{fontSize:12}})})})};const ve=o=>{const{id:l,isSlot:s}=o,n=f(b),t=f(d),[r,a]=p.useState(""),[m,y]=p.useState({x:0,y:0}),h=()=>{const c=P=>P.find((S,E)=>S.id===l?(P.splice(E,1),!0):S.slot?c(S.slot):!1);c(g),Promise.resolve().then(()=>{delete b.id,delete d[l]})},u=()=>{Promise.resolve().then(()=>{delete b.id})};return p.useEffect(()=>{const c=document.getElementById(l);if(o.children&&p.Children.count(o.children)===1&&c&&c.childNodes[0]&&a(window.getComputedStyle(c.childNodes[0]).display||""),l===n.id){const P=c==null?void 0:c.getBoundingClientRect().right,S=c==null?void 0:c.getBoundingClientRect().bottom;P!==void 0&&S!==void 0&&y({x:document.documentElement.clientWidth-P,y:S})}},[l,n.id]),i(v,{children:[e("div",{id:l,className:`hover:editor-hover z-10 m-b1 m-r1 ${l===n.id&&"editor-hover"} ${r}`,onClick:c=>{c.stopPropagation(),c.cancelable=!0,b.id=l},children:o.children}),l===n.id&&e("div",{className:"fixed z-999999999999 bg-brand-primary flex text-white items-center	p-2px rounded-3px",style:{right:m.x,top:m.y+5},children:i(k,{prefixCls:"one-codes",componentSize:"small",children:[e("span",{className:"px-5px text-12px",children:t[l].componentName}),i(O.Group,{compact:!0,style:{borderRadius:5},children:[e(L,{slotId:l}),e(C,{title:"删除组件",overlayInnerStyle:{fontSize:12,borderRadius:5},showArrow:!1,children:e(x,{className:"bg-brand-primary  text-white	text-10px cursor-pointer p-8px",type:"primary",onClick:h,icon:e(G,{style:{fontSize:12}})})}),e(C,{title:"取消",overlayInnerStyle:{fontSize:12,borderRadius:5},showArrow:!1,children:e(x,{className:"bg-brand-primary  text-white	text-10px cursor-pointer p-8px",type:"primary",onClick:u,icon:e(U,{style:{fontSize:12}})})})]})]})})]})},R=p.memo(ve),B=o=>{const l=o.idSchema;return f(d),e(v,{children:l.map(({id:s,slot:n})=>{const t=d[s].component,r=d[s].props;return n?e(R,{id:s,children:e(t,{...r,children:e(B,{idSchema:n})})},s):e(R,{id:s,children:e(t,{...r})},s)})})},Pe=()=>{const o=f(g);return f(d),i(v,{children:[e(k,{prefixCls:"ant",children:e(B,{idSchema:o})}),e("div",{className:"w-100%",children:e(L,{})})]})},Ne=()=>{const o=f(b);return i("div",{className:"flex flex-col flex-1 bg-brand-grey p-t-0",children:[i(Z,{className:"flex h-7 w-full bg-white b-brand-grey border-l-1 border-r-1 justify-end items-center p-x2",children:[e(C,{title:"编辑模式",overlayInnerStyle:{fontSize:12,borderRadius:5},showArrow:!1,children:e(x,{size:"small",type:"text",onClick:()=>{b.panelMode="edit"},style:{color:o.panelMode==="edit"?"#2558fb":"#9b9b9b"},icon:e(X,{})})}),e(C,{title:"代码查看模式",overlayInnerStyle:{fontSize:12,borderRadius:5},showArrow:!1,children:e(x,{size:"small",type:"text",onClick:()=>{b.panelMode="code"},style:{color:o.panelMode==="code"?"#2558fb":"#9b9b9b"},icon:e(Y,{})})})]}),i("div",{className:"h-[calc(100vh-5rem)] bg-white overflow-y-auto m-2 p-1 flex-col",children:[o.panelMode==="edit"&&e(Pe,{}),o.panelMode==="code"&&e(ge,{})]})]})},we={Switch:te,NumberPicker:le},Ce=()=>{const o=f(b),l=f(d),[s,n]=p.useState(()=>({form:w.createForm({}),fields:[]})),t=!!o.id;return p.useEffect(()=>{var r,a,m;if(o.id){const y=l&&o.id&&((r=d[o.id])==null?void 0:r.configProps)||[],h=((a=l[o.id])==null?void 0:a.component.defaultProps)||{},u=((m=d[o.id])==null?void 0:m.props)||h;n({fields:y,form:w.createForm({initialValues:u})})}},[o.id,l]),e("div",{className:"w-1/5  border-brand-line ",children:e("div",{className:"p-5",children:t&&e(w,{form:s.form,layoutProps:{layout:"vertical",labelCol:9},gridProps:{maxColumns:1},install:we,fields:s.fields,onValuesChange:r=>{t&&(d[o.id].props=ee(r))}})})})},Fe=()=>i("div",{className:"flex flex-col relative very-cool w-full	h-full",children:[e(ye,{}),i("div",{className:"flex flex-1",children:[e(Ne,{}),e(Ce,{})]})]});function ke(o){return p.useEffect(()=>{T.install=o.install},[]),e(k,{locale:oe,prefixCls:"one-codes",children:e(Fe,{})})}const z=o=>i("div",{className:"flex m-b-2",children:[e("div",{className:"w-5px b-rd-2px bg-brand-primary mr-7px"}),e("div",{className:"flex-1 text-3.5 font-bold",children:o.str})]}),Ie=re(o=>{const[l,{setTrue:s,setFalse:n}]=ne(),t=p.useMemo(()=>w.createForm(),[]);return i(v,{children:[e(x,{type:"primary",onClick:()=>{s(),t.setValues({columns:I(o.value||[])})},children:"columns配置"}),e(A,{title:"column配置",open:l,onOk:async()=>{await t.validate();let r=I(t.values.columns);r=r.map(a=>{var m;return(m=a==null?void 0:a.searchField)!=null&&m.type||delete a.searchField,a}),o.onChange(r),n()},onCancel:()=>{n()},children:e(k,{componentSize:"small",children:e(w,{form:t,gridProps:{maxColumns:2},layoutProps:{labelCol:0},fields:[{type:"ArrayTabs",name:"columns",valueType:"Array",children:[{type:()=>e(z,{str:"columns配置"}),itemProps:{style:{margin:0,padding:0}}},{type:"Input",required:!0,title:"title",name:"title"},{type:"Input",required:!0,title:"dataIndex",name:"dataIndex"},{type:()=>e(z,{str:"table搜索配置"}),itemProps:{style:{margin:0,padding:0}}},{type:"Select",name:"searchField.type",title:"type",props:{allowClear:!0},enum:[{label:"输入框",value:"Input"},{label:"选择框",value:"Select"}]},{type:"Input",required:!0,title:"title",name:"searchField.title",reactions:{dependencies:["..searchField.type"],fulfill:{state:{display:"{{!$deps[0]? 'none':'visible'}}"}}}},{type:"Input",required:!0,name:"searchField.name",title:"name",reactions:{dependencies:["..searchField.type"],fulfill:{state:{display:"{{!$deps[0]? 'none':'visible'}}"}}}}]}]})})})]})});const M=document.getElementById("root"),N=()=>Math.floor(Math.random()*1e5).toString(16);M&&ae(M).render(e(ke,{install:[{typeName:"FormRender组件",icon:"",children:[{component:se,componentName:"TableFormRender",defaultProps:{tableProps:{size:"small",rowKey:"id"},request:async()=>new Promise(l=>{setTimeout(()=>{l({total:1e3,list:Array(1e3).fill("").map((s,n)=>({id:n,a:N(),b:N(),c:N(),d:N(),e:N()}))})},300)}),columns:[{title:"a",dataIndex:"a",searchField:{type:"Input",required:!0,title:"选项",props:{options:[{label:"选项1",value:"1 "},{label:"选项2",value:"2"}]}}},{title:"b",dataIndex:"b",searchField:{type:"Select",props:{options:[{label:"选项1",value:" 1 "},{label:"选项2",value:" 2"}]}}},{title:"c",dataIndex:"c",searchField:{type:"Select",title:"c",props:{options:[{label:"选项1",value:" 1 "},{label:"选项2",value:" 2"}]}}},{title:"d",dataIndex:"d",searchField:{type:"Select",title:"c",props:{options:[{label:"选项1",value:" 1 "},{label:"选项2",value:" 2"}]}}},{title:"e",dataIndex:"e",searchField:{type:"Select",props:{options:[{label:"选项1",value:" 1 "},{label:"选项2",value:" 2"}]}}}]},configProps:[{type:"Select",title:"table-size",name:"tableProps.size",enum:[{label:"小",value:"small"},{label:"中",value:"middle"},{label:"大",value:"large"}]},{type:"Switch",title:"borded",name:"tableProps.bordered",valueType:"Boolean"},{type:Ie,name:"columns",title:"columns配置"}]},{component:ie,componentName:"Card",defaultProps:{size:"small",title:"title"},configProps:[{type:"Input",name:"title",title:"title"},{type:"Select",enum:[{value:"small",label:"small"},{value:"default",label:"default"}],name:"size",title:"size"}]}]},{typeName:"Antd 组件",icon:"",children:[{component:O,componentName:"Input",isSlot:!1,defaultProps:{bordered:!0},configProps:[{type:"Switch",name:"showCount",title:"是否显示数字"},{type:"Switch",name:"bordered",title:"是否有边框"},{type:"Switch",name:"allowClear",title:"可以点击清除图标删除内容"}]},{component:x,componentName:"Button",isSlot:!1,defaultProps:{block:!1,type:"default",shape:"default",children:"Button"},configProps:[{type:"Input",name:"children",title:"内容"},{type:"Switch",name:"block",title:"将按钮宽度调整为其父宽度的选项"},{type:"Switch",name:"danger",title:"设置危险按钮"},{type:"Select",name:"shape",title:"设置按钮形状",enum:[{label:"default",value:"default"},{label:"circle",value:"circle"},{label:"round",value:"round"}]},{type:"Select",name:"type",title:"设置按钮类型",enum:[{label:"default",value:"default"},{label:"primary",value:"primary"},{label:"ghost",value:"ghost"},{label:"dashed",value:"dashed"},{label:"link",value:"link"},{label:"text",value:"text"}]}]},{component:l=>i(v,{children:[e(x,{children:"Modal"}),e(A,{...l})]}),componentName:"Modal",isSlot:!1,defaultProps:{maskClosable:!0,title:"title",width:520,open:!1},configProps:[{type:"Switch",name:"maskClosable",title:"点击蒙层是否允许关闭"},{type:"Input",name:"title",title:"标题"},{type:"NumberPicker",name:"width",title:"宽度"},{type:"Switch",name:"open",title:"对话框是否可见"}]}]},{typeName:"表单组件",icon:"",children:[{component:ce,componentName:"ProFormText",isSlot:!1,defaultProps:{label:"abc",name:"abc"},configProps:[{type:"Switch",name:"fieldProps.showCount",title:"是否显示数字"}]},{component:de,isSlot:!1,componentName:"ProFormDatePicker",defaultProps:{label:"ProFormDatePicker",name:"ProFormDatePicker"}},{component:pe,componentName:"ProFormCheckbox",isSlot:!1,defaultProps:{label:"ProFormCheckbox",name:"ProFormCheckbox"}},{component:me,componentName:"ProFormRadio",isSlot:!1,defaultProps:{label:"ProFormRadio",name:"ProFormRadio"}},{component:ue,componentName:"ProFormTextArea",isSlot:!1,defaultProps:{label:"ProFormTextArea",name:"ProFormTextArea"}},{component:fe,componentName:"ProForm",isSlot:!0,defaultProps:{layout:"inline"}},{component:he,componentName:"QueryFilter",isSlot:!0,configProps:[{type:"Switch",name:"defaultCollapsed",title:"默认收起"},{type:"Switch",name:"split",title:"每一行是否有分割线"},{type:"NumberPicker",name:"labelWidth",title:"label 宽度"}],defaultProps:{defaultCollapsed:!0,labelWidth:80}}]}]}));
